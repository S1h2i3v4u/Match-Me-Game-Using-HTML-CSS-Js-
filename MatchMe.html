<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Matching Game</title>
    
    <style>
        #container {
            display: flex;
            flex-wrap: wrap;
            width: 704px;
            border: 2px solid black;
            margin: 0 auto;
        }

        .box, .black {
            height: 88px;
            width: 88px;
            position: relative;
            border: 2px solid black;
            flex: 1 0 12.5%;
            box-sizing: border-box;
            cursor: pointer;
        }
        .box {
            background-color: white;
        }

        .black {
            background-color: black;
        }

        .box img, .black img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .box img.revealed, .black img.revealed {
            opacity: 1;
        }

        .score {
            text-align: center;
            align-items: center;
            font-size: 20px;
            margin: 20px;
        }
        .scores {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            font-size: 24px;
            margin: 20px;
        }

        #congratsMessage {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 24px;
        }

        #matchMessage {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 24px;
        }

        /* Responsive styles */
        @media (max-width: 700px) {
            .box, .black {
                height: 44px;
                width: 44px;
            }
        }

        @media (max-width: 450px) {
            .box, .black {
                height: 22px;
                width: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="score">Current Turn: <span id="currentPlayer">Player 1</span></div>
    <div class="scores">
        <div>Player 1 Score: <span id="score1">0</span></div>
        <div>Player 2 Score: <span id="score2">0</span></div>
    </div>
    <div id="container">
        <div class="box" onclick="revealImage(this)"><img src="../img/s1.jpg" alt="Image1"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s13.jpg" alt="Image2"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s7.jpg" alt="Image3"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s8.jpg" alt="Image4"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s9.jpg" alt="Image5"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s10.jpg" alt="Image6"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s11.jpg" alt="Image7"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s12.jpg" alt="Image8"></div>

        <div class="black" onclick="revealImage(this)"><img src="../img/s2.jpg" alt="Image1"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s14.jpg" alt="Image2"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s15.jpg" alt="Image3"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s16.jpg" alt="Image4"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s17.jpg" alt="Image5"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s18.jpg" alt="Image6"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s19.jpg" alt="Image7"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s20.jpg" alt="Image8"></div>

        <div class="box" onclick="revealImage(this)"><img src="../img/s3.jpg" alt="Image1"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s12.jpg" alt="Image2"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s11.jpg" alt="Image3"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s10.jpg" alt="Image4"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s9.jpg" alt="Image5"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s8.jpg" alt="Image6"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s7.jpg" alt="Image7"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s13.jpg" alt="Image8"></div>

        <div class="black" onclick="revealImage(this)"><img src="../img/s4.jpg" alt="Image1"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s21.jpg" alt="Image2"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s1.jpg" alt="Image3"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s6.jpg" alt="Image4"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s5.jpg" alt="Image5"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s4.jpg" alt="Image6"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s3.jpg" alt="Image7"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s2.jpg" alt="Image8"></div>

        <div class="box" onclick="revealImage(this)"><img src="../img/s5.jpg" alt="Image1"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s22.jpg" alt="Image2"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s23.jpg" alt="Image3"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s24.jpg" alt="Image4"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s14.jpg" alt="Image5"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s21.jpg" alt="Image6"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s22.jpg" alt="Image7"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s15.jpg" alt="Image8"></div>

        <div class="black" onclick="revealImage(this)"><img src="../img/s6.jpg" alt="Image1"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s18.jpg" alt="Image2"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s17.jpg" alt="Image3"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s16.jpg" alt="Image4"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s23.jpg" alt="Image5"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s19.jpg" alt="Image6"></div>
        <div class="black" onclick="revealImage(this)"><img src="../img/s24.jpg" alt="Image7"></div>
        <div class="box" onclick="revealImage(this)"><img src="../img/s20.jpg" alt="Image8"></div>
    </div>
    <div id="congratsMessage"></div>
    <div id="matchMessage">Wow, very good!</div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        let score1 = 0;
        let score2 = 0;
        let firstSelection = null;
        let secondSelection = null;
        let currentPlayer = 1;
        const totalPairs = 24;  // Total pairs in the game
        let matchedPairs = 0;  // To keep track of matched pairs

        function revealImage(element) {
            const img = element.querySelector('img');
            if (!img.classList.contains('revealed') && firstSelection !== img) {
                img.classList.add('revealed');
                if (!firstSelection) {
                    firstSelection = img;
                } else {
                    secondSelection = img;
                    if (firstSelection.src === secondSelection.src) {
                        matchedPairs++;
                        if (currentPlayer === 1) {
                            score1++;
                            document.getElementById('score1').textContent = score1;
                        } else {
                            score2++;
                            document.getElementById('score2').textContent = score2;
                        }

                        showMatchMessage();  // Show "Wow, very good!" message

                        firstSelection = null;
                        secondSelection = null;

                        checkEndGame();  // Check if the game has ended
                    } else {
                        setTimeout(() => {
                            firstSelection.classList.remove('revealed');
                            secondSelection.classList.remove('revealed');
                            firstSelection = null;
                            secondSelection = null;
                        }, 1000);

                        // Switch player turn
                        currentPlayer = currentPlayer === 1 ? 2 : 1;
                        document.getElementById('currentPlayer').textContent = 'Player ' + currentPlayer;
                    }
                }
            }
        }

        function showMatchMessage() {
            const matchMessage = document.getElementById('matchMessage');
            matchMessage.style.display = 'block';
            setTimeout(() => {
                matchMessage.style.display = 'none';
            }, 1000);
        }

        function checkEndGame() {
            if (matchedPairs === totalPairs) {
                let winnerMessage = '';
                if (score1 > score2) {
                    winnerMessage = 'Congratulations Player 1! You are the winner!';
                } else if (score2 > score1) {
                    winnerMessage = 'Congratulations Player 2! You are the winner!';
                } else {
                    winnerMessage = 'It\'s a tie!';
                }

                const congratsMessage = document.getElementById('congratsMessage');
                congratsMessage.textContent = winnerMessage;
                congratsMessage.style.display = 'block';

                setTimeout(() => {
                    confetti({
                        particleCount: 200,
                        spread: 160,
                        origin: { y: 0.6 }
                    });
                }, 500);

                // Restart the game after 5 seconds
                setTimeout(() => {
                    congratsMessage.style.display = 'none';
                    resetGame();
                }, 5000);
            }
        }

        function shuffleImages() {
            const container = document.getElementById('container');
            const images = Array.from(container.querySelectorAll('.box img, .black img'));
            for (let i = images.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [images[i].src, images[j].src] = [images[j].src, images[i].src];
            }
        }

        function resetGame() {
            score1 = 0;
            score2 = 0;
            firstSelection = null;
            secondSelection = null;
            currentPlayer = 1;
            matchedPairs = 0;
            document.getElementById('score1').textContent = score1;
            document.getElementById('score2').textContent = score2;
            document.getElementById('currentPlayer').textContent = 'Player ' + currentPlayer;

            const images = document.querySelectorAll('.box img, .black img');
            images.forEach(img => img.classList.remove('revealed'));

            shuffleImages();
        }
    </script>
</body>
</html>
